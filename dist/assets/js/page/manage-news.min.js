var fields,data={},dateToday=new Date,options=$.extend({},$.datepicker.regional.ja,{changeMonth:!0,changeYear:!0,dateFormat:"yy/mm/dd"});function addDatePicker(){$("body").on("focus",".js-datepicker",function(){$(this).datepicker(options)})}function editRow(){$("body").on("click",".js-edit-row",function(){if(fields=$(this).closest(".js-row").find("input"),$(this).is(".editing"))return $(this).text("修正する"),$(this).removeClass("editing"),fields.prop("disabled",!0),fields.each(function(e,t){var i=$(this).attr("name"),o=$(this).val();data[i]=o}),$.ajax({method:"POST",dataType:"json",data:data}).success(function(e){}).error(function(e,t,i){console.log(e+t+i)}),!1;$(this).text("セーブする"),$(this).addClass("editing"),fields.prop("disabled",!1)})}function deleteRow(){$("body").on("click",".js-delete-row",function(){return $(this).closest(".js-row").remove(),data.delete=$(this).closest(".js-row").find("input[name=post_id]").val(),$.ajax({method:"POST",dataType:"json",data:data}).success(function(e){}).error(function(e,t,i){console.log(e+t+i)}),!1})}function selectRedirect(){$(".js-select-redirect").on("change",function(){var e=$(this).val();return e&&(window.location=e),!1})}$(document).ready(function(){addDatePicker(),editRow(),deleteRow(),selectRedirect()});