var calendar=$(".js-calendar"),schedule=$(".js-schedule"),schedule_popup=$(".js-popup");function slider(){$(".js-voice-slider").slick({speed:1e4,autoplay:!0,autoplaySpeed:0,cssEase:"linear",slidesToShow:2.75,arrows:!1,responsive:[{breakpoint:500,settings:{slidesToShow:1.5}}]})}function faq(){$(".js-lst-faq .item:first-child").addClass("active").find(".js-ans").slideToggle(),$("body").on("click",".js-ques",function(){$(this).siblings(".js-ans").slideToggle().parent().toggleClass("active")})}function price(){$(".js-lst-price .item:first-child").addClass("active").find(".js-price-tbl").slideToggle(),$("body").on("click",".js-price-ttl",function(){$(this).siblings(".js-price-tbl").slideToggle().parent().toggleClass("active")})}function deleteEmptyRow(){console.log("haha");var t=$(".js-calendar .col:first-child").find(".lesson").length,e=$(".js-calendar .col").length,o=[],s="";for(i=1;i<=t;i++)j=0,$(".js-calendar .col").each(function(){""==$(this).find(".lesson:nth-child("+i+")").html()&&j++}),j==e&&o.push(i);$.each(o,function(t,e){s+=":nth-child("+e+"),"}),s=s.slice(0,-1),$(".js-calendar .col .lesson").filter(s).remove()}function getAjax(t,e){$.ajax({method:"GET",url:location.origin+"/libs/ajax-studio-schedule.php",dataType:"json",data:{post_id:t,date_start:e}}).success(function(t){schedule.html(t.html),schedule_popup.html(t.html_popup),simplebartbl()}).error(function(t,e,o){console.log(t.status),console.log(o)}).done(function(){$(".js-calendar .lesson").matchHeight({byRow:!1}),deleteEmptyRow()})}function get7DaysBefore(t){var e=new Date(t),o=new Date(e.getTime()-6048e5),s=o.getDate(),a=o.getMonth()+1;return o.getFullYear()+"/"+a+"/"+s}function get7DaysAfter(t){var e=new Date(t),o=new Date(e.getTime()+6048e5),s=o.getDate(),a=o.getMonth()+1;return o.getFullYear()+"/"+a+"/"+s}function ajaxSchedule(){getAjax(_post_id,_date),$("body").on("click",".js-prev",function(){_date=get7DaysBefore(_date),getAjax(_post_id,_date)}),$("body").on("click",".js-next",function(){_date=get7DaysAfter(_date),getAjax(_post_id,_date)})}function popup(){$("body").on("click",".js-lesson",function(){var t=$(this).attr("data-popup"),e=$(this).attr("data-id"),o=$(".js-popup[data-popup="+t+"]");o.addClass("active"),o.find('[data-id="'+e+'"]').addClass("active").siblings().removeClass("active");var s=$(window).scrollTop(),a=$("body").outerHeight();$("body").attr("data-position",s),$("body").css({top:"-"+s+"px",left:0,width:"100%",height:a+"px",position:"fixed","z-index":"-1","touch-action":"none",overflow:"hidden"})}),$(".js-popup").on("click",function(t){t.target===this&&$(".btn_close").trigger("click")}),$("body").on("click",".btn_close",function(){$(".js-popup").removeClass("active");$(window).scrollTop(),$("body").outerHeight();var t=$("body").attr("data-position");$("body").css({"touch-action":"auto","overflow-x":"hidden","overflow-y":"auto",position:"static",top:"auto",height:"auto"}),$("html,body").scrollTop(Math.abs(Number(t)))})}function autoCompleteForm(){$("body").on("click",".js-btn-box",function(t){$(".js-popup").removeClass("active"),$("body").css({"touch-action":"auto","overflow-x":"hidden","overflow-y":"auto",position:"static",top:"auto",height:"auto"});var e=$(this).attr("data-lesson"),o=$(this).attr("data-date"),s=$(this).attr("data-time"),a=$(this).attr("data-instructor");$(".js-lesson-ttl").text(e),$(".input-lesson").val(e),$(".js-schedule-time").text(o+" "+s),$(".input-date").val(o),$(".input-time").val(s),$(".input-instructor").val(a);var i=getHeaderHeight();t.preventDefault();var n=this.hash,l=$(n);0<l.length&&$("html, body").stop().animate({scrollTop:l.offset().top-i},300,"swing",function(){})})}function simplebartbl(){new SimpleBar($(".js-out-lst")[0],{autoHide:!1})}$(document).ready(function(){slider(),faq(),price(),ajaxSchedule(),popup(),autoCompleteForm()}),$(".c-news .c-news__lst--item").click(function(){var t=$(this).attr("data-id");$.ajax({method:"POST",url:_url+"/libs/ajax-news.php",dataType:"json",data:{id:t},success:function(t){$(".popup-new").html(""),$(".popup-new").append(t.html).fadeIn(),$("body").addClass("menu-open"),$("body").css("top",-st),$(".btn_close_new").click(function(){$(".popup-new").fadeOut(),$("body").removeClass("menu-open"),!1===$("body").hasClass("menu-open")?(rescroll=$("body").css("top").replace(/-|px/g,""),$("body,html").scrollTop(rescroll)):$("body").css("top",-st)})}})});